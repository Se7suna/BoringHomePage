# 接口文档

写在前面的话:

- 请求示例 与 返回示例
- ` resCode ` 为 ` 1 ` 时, 表示请求成功, 后台返回预期的数据
- ` resCode ` 为 ` 0 ` 时, 表示请求失败, 后台返回错误信息
- 在以下目录中, 前缀 [+] 表示已完成接口
- 在以下目录中, 前缀 [-] 表示已删除接口
- 在以下目录中, 前缀 [ ] 表示接口未完成

目录:

- [[x]用户获得随机background](#-获得随机background)
- [[ ]用户获得当前用户的当前天气](#-获得当前用户的当前天气)
- [[-]用户保存收藏的链接](#-保存收藏的链接)
- [[-]用户更新收藏的链接](#-更新收藏的链接)
- [[-]用户获得收藏的链接集](#-获得收藏的链接集)
- [[x]用户注册](#-用户注册)
- [[x]用户登录](#-用户登录)
- [[ ]用户编辑](#-用户编辑)
- [[x]用户创建群组](#-用户创建群组)
- [[x]用户加入群组](#-用户加入群组)
- [[ ]用户获得群组列表](#-用户获得群组列表)
- [[ ]群组中链接列表](#-群组中链接列表) 
- [[ ]群组中用户列表](#-群组中用户列表)
- [[ ]群组中新增链接](#-群组中新增链接) 

------

## \# 获得随机background
- 接口地址: ` /getRandomScreensaver.php ` ;
- 请求方式: ` GET `
- 请求参数: 
  ```
  {
    pageSize : 10,// 每页条数
    pageNum  : 1  // 页码
  }
  ```
- 返回数据: 
  ```
  {
    resCode: 1, 
    resData: {
      dataSize : 10,
      dataNum : 1,
      dataTotal : 100,
      dataList :[{
          id:1,
          bgSrc: 'https://rabc2.iteye.com/i/media/v1/0f000nTw6TryU7IXpq-Cqs.jpg',
          bgStar: 1,
          bgAuthor:'',
          bgName: '图片名,图片标题,可以用,可以不用',
          bgDesc: '图片说明,图片详情,图片介绍,这是某某国家某某地区, 很丑的一个公考拉',
      },{
          id:2,
          bgSrc: 'https://rabc2.iteye.com/i/media/v1/0f000nTw6TryU7IXpq-Cqs.jpg',
          bgStar: 1,
          bgAuthor:'',
          bgName: '图片名,图片标题,可以用,可以不用',
          bgDesc: '图片说明,图片详情,图片介绍,这是某某国家某某地区, 很丑的一个公考拉',
      }]
    },
    resInfo:'成功: 获得数据!'
  }
  ```

## \# 获得当前用户的当前天气 
> 天气图标下载地址：http://api.jisuapi.com/weather/icon.zip 

请前端缓存相关信息, 最低每分钟允许刷新一次

- 接口地址: ` /getCurrentWeather.php ` ;
- 请求参数: 无
- 返回数据: 
  ```
  { 
    resCode: 1,
    resData: {
        "city": "安顺",
        "cityid": "111",
        "citycode": "101260301",
        "date": "2015-12-22",
        "week": "星期二",
        "weather": "多云",
        "temp": "16",
        "temphigh": "18",
        "templow": "9",
        "img": "1",
        "humidity": "55",
        "pressure": "879",
        "windspeed": "14.0",
        "winddirect": "南风",
        "windpower": "2级",
        "updatetime": "2015-12-22 15:37:03",
        "index": [{
            "iname": "空调指数",
            "ivalue": "较少开启",
            "detail": "您将感到很舒适，一般不需要开启空调。"
        }, {
            "iname": "运动指数",
            "ivalue": "较适宜",
            "detail": "天气较好，无雨水困扰，较适宜进行各种运动，但因气温较低，在户外运动请注意增减衣物。"
        }],
        "aqi": {
            "so2": "37",
            "so224": "43",
            "no2": "24",
            "no224": "21",
            "co": "0.647",
            "co24": "0.675",
            "o3": "26",
            "o38": "14",
            "o324": "30",
            "pm10": "30",
            "pm1024": "35",
            "pm2_5": "23",
            "pm2_524": "24",
            "iso2": "13",
            "ino2": "13",
            "ico": "7",
            "io3": "9",
            "io38": "7",
            "ipm10": "35",
            "ipm2_5": "35",
            "aqi": "35",
            "primarypollutant": "PM10",
            "quality": "优",
            "timepoint": "2015-12-09 16:00:00",
            "aqiinfo": {
                "level": "一级",
                "color": "#00e400",
                "affect": "空气质量令人满意，基本无空气污染",
                "measure": "各类人群可正常活动"
            }
        },
        "daily": [{
            "date": "2015-12-22",
            "week": "星期二",
            "sunrise": "07:39",
            "sunset": "18:09",
            "night": {
                "weather": "多云",
                "templow": "9",
                "img": "1",
                "winddirect": "无持续风向",
                "windpower": "微风"
            },
            "day": {
                "weather": "多云",
                "temphigh": "18",
                "img": "1",
                "winddirect": "无持续风向",
                "windpower": "微风"
            }
        }],
        "hourly": [{
            "time": "16:00",
            "weather": "多云",
            "temp": "14",
            "img": "1"
        }, {
            "time": "17:00",
            "weather": "多云",
            "temp": "13",
            "img": "1"
        }]
    },
    resInfo:'获取数据成功'
  }
  ```

## \# 保存收藏的链接
- 接口地址: ` /saveFavoriteLinks.php ` ;
- 请求方式: ` GET `
- 请求参数: 
  ```
  {
    linkIco: 'https://imgcache.qq.com/open_proj/proj_qcloud_v2/gateway/portal/css/img/nav/logo-bg-color.svg',
    linkToSrc: 'https://cloud.tencent.com/',
    linkName: '收藏名,收藏标题',
    userId : 10010
  }
  ```
- 返回数据: 
  ```
  {
    resCode: 1, 
    resData: {
      linkId : '123123123' , // 链接id
      linkIco: 'https://imgcache.qq.com/open_proj/proj_qcloud_v2/gateway/portal/css/img/nav/logo-bg-color.svg',
      linkToSrc: 'https://cloud.tencent.com/',
      linkName: '收藏名,收藏标题',
    },
    resInfo:'获取数据成功'
  }
  ```

## \# 更新收藏的链接
- 接口地址: ` /updateFavoriteLinks.php ` ;
- 请求方式: ` GET `
- 请求参数: 
  ```
  {
    linkId : 1,
    linkIco: 'https://imgcache.qq.com/open_proj/proj_qcloud_v2/gateway/portal/css/img/nav/logo-bg-color.svg',
    linkToSrc: 'https://cloud.tencent.com/',
    linkName: '收藏名,收藏标题',
  }
  ```
- 返回数据: 
  ```
  {
    resCode: 1, 
    resData: {
      id:'',
      linkId : 1,
      linkIco: 'https://imgcache.qq.com/open_proj/proj_qcloud_v2/gateway/portal/css/img/nav/logo-bg-color.svg',
      linkToSrc: 'https://cloud.tencent.com/',
      linkName: '收藏名,收藏标题',
    },
    resInfo:'更新数据成功'
  }
  ```

## \# 获得收藏的链接集

> 一次返回完毕, 前端自主实现分页

- 接口地址: ` /getFavoriteLinks.php ` ;
- 请求方式: ` GET `
- 请求参数: 
  ```
  {
    pageSize : 10,// 每页条数
    pageNum  : 1 ,// 页码
    userId   : 10010 ,
  }
  ```
- 返回数据: 
  ```
  {
    resCode: 1, 
    resData: {
      dataSize : 10,
      dataNum : 1,
      dataTotal : 100,
      dataList : [
        {
          linkId : 1,
          linkIco: 'https://imgcache.qq.com/open_proj/proj_qcloud_v2/gateway/portal/css/img/nav/logo-bg-color.svg',
          linkToSrc: 'https://cloud.tencent.com/',
          linkName: '收藏名,收藏标题',
        },{
          linkId : 1,
          linkIco: 'https://imgcache.qq.com/open_proj/proj_qcloud_v2/gateway/portal/css/img/nav/logo-bg-color.svg',
          linkToSrc: 'https://cloud.tencent.com/',
          linkName: '收藏名,收藏标题',
        }
      ]
    },
    resInfo:'获取数据成功'
  }
  ```

## \# 用户注册
- 接口描述
  - 后台: 用户名和密码必填但不作额外验证, 用户头像选填
  - 用户头像目前仅支持 http 链接形式的, 暂不支持自主上传
- 接口地址: ` /userRegister.php ` ;
- 请求方式: ` GET `
- 请求参数: 
  ```
  {
    userAvatar: 'http://tup.jpg' // 用户头像
    userName : 'qgp',   // 用户名
    userPass : '123456' // 密码
  }
  ```
- 返回数据: 
  ```
  {
    resCode: 1, 
    resData: {
      userId : 10010 , // 用户id
      userAvatar: 'http://tup.jpg' ,// 用户头像
      userName : 'qgp',   // 用户名
      userPass : '123456' // 密码
    },
    resInfo: '用户注册成功！'
  }
  ```


## \# 用户登录
- 第三方登录?
- github登录?
- 自定义登录
  - 接口描述: 目前密码是非必填 
  - 接口地址: ` /userLogin.php ` ;
  - 请求方式: ` GET `
  - 请求参数: 
    ```
    {
      userName : 'qgp',   // 用户名
      userPass : '123456' // 密码
    }
    ```
  - 返回数据: 
    ```
    {
      resCode: 1, 
      resData: {
        userId : 10010 , // 用户id
        userAvatar: 'http://tup.jpg' // 用户头像
        userName : 'qgp',   // 用户名
      },
      resInfo: '用户登录成功！'
    }
    ```

## \# 用户编辑
- 接口地址: ` /userEdit.php ` ;
- 请求方式: ` GET `
- 请求参数: 
  ```
  {
    userId : 10010 , // 用户id
    userAvatar: 'http://tup.jpg' // 用户头像
    userName : 'qgp',   // 用户名
    userPass : '123456' // 密码
  }
  ```
- 返回数据: 
  ```
  {
    resCode: 1, 
    resData: {
      userId : 10010 , // 用户id
      userAvatar: 'http://tup.jpg' // 用户头像
      userName : 'qgp',   // 用户名
      userPass : '123456' // 密码
    },
    resInfo:'用户编辑成功'
  }
  ```

## \# 用户创建群组

> 生成一个 key

- 接口地址: ` /generateKEY.php ` ;
- 请求方式: ` GET `
- 请求参数: 
  ```
  {
    userId : 10010,// 用户id(登录时获得) , 必填
    groupName : '肉山小客厅' // 群名, 非必填
  }
  ```
- 返回数据: 
  ```
  {
    resCode: 1, 
    resData: {
      hash : 'c20ad4d76fe97759aa27a0c99bff6710',
      groupId : 'c20ad4d76fe97759aa27a0c99bff6710',
      groupLord : '10010', // 群主
      groupName : '肉山小客厅',
    },
    resInfo:'创建成功'
  }
  ```

## \# 用户加入群组

> 提交一个 key


- 接口地址: ` /submitKEY.php ` ;
- 请求方式: ` GET `
- 请求参数: 
  ```
  {
    hash : 'c20ad4d76fe97759aa27a0c99bff6710', // 
    userId: 10010, // 用户id(登录时获得) , 必填
  }
  ```
- 返回数据: 
  ```
  {
    resCode: 1, 
    resData: {
      groupId : 'c20ad4d76fe97759aa27a0c99bff6710' , // 群id即为 hash
      userId : 10010
    },
    resInfo:'加入成功'
  }
  ```

## \# 用户获得群组列表

> 包括用户创建的 和 用户加入的

- 接口描述
  - 关于 `groupCompetence` :
    - normal : 表示当前用户普通组员
    - administrator : 表示当前用户为群主
- 接口地址: ` /getGroupList.php ` ;
- 请求方式: ` GET `
- 请求参数: 
  ```
  {
    userId : 10010 , // 用户id
  }
  ```
- 返回数据: 
  ```
  {
    resCode: 1, 
    resData: {
      dataList :[{
        groupName : '肉山小客厅',
        groupId : 'c20ad4d76fe97759aa27a0c99bff6710',
        groupCompetence: 'normal',
      },{
        groupName : '肉山小课堂',
        groupId : 'c20ad4d76fe97759aa27a0c99bff6710',
        groupCompetence: 'administrator',
      }]
    },
    resInfo:'获取数据成功'
  }
  ```

## \# 群组中链接列表
- 接口地址: ` /getLinksOfGroup.php ` ;
- 请求方式: ` GET `
- 请求参数: 
  ```
  {
    groupId  : 'c20ad4d76fe97759aa27a0c99bff6710' , // 群id
    pageSize : 10,// 每页条数
    pageNum  : 1  // 页码
  }
  ```
- 返回数据: 
  ```
  {
    resCode: 1, 
    resData: {
      dataSize : 10,
      dataNum : 1,
      dataTotal : 100,
      dataList :[{
        link : 'baidu.com',
      },{
        link : 'google.com',
      }]
    },
    resInfo:'获取数据成功'
  }
  ```

## \# 群组中用户列表
- 接口地址: ` /getUsersOfGroup.php ` ;
- 请求方式: ` GET `
- 请求参数: 
  ```
  {
    groupId  : 'c20ad4d76fe97759aa27a0c99bff6710' , // 群id
    pageSize : 10,// 每页条数
    pageNum  : 1  // 页码
  }
  ```
- 返回数据: 
  ```
  {
    resCode: 1, 
    resData: {
      dataSize : 10,
      dataNum : 1,
      dataTotal : 100,
      dataList :[{
        userId : 10010,
        userName : 'qgp'
      },{
        userId : 10010,
        userName : 'hesf'
      }]
    },
    resInfo:'获取数据成功'
  }
  ```

## \# 群组中新增链接
- 接口地址: ` /addLinkOfGroup.php ` ;
- 请求方式: ` GET `
- 请求参数: 
  ```
  {
    groupId  : 'c20ad4d76fe97759aa27a0c99bff6710' , // 群id
    userId : 10010 ,
    linkOfGroup : 'baidu.com', // 添加的链接
  }
  ```
- 返回数据: 
  ```
  {
    resCode: 1, 
    resData: {
      groupId  : 'c20ad4d76fe97759aa27a0c99bff6710' , // 群id
      linkOfGroup : 'baidu.com', // 添加的链接
    },
    resInfo:'新增成功'
  }
  ```























